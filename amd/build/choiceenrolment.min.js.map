{"version":3,"sources":["../src/choiceenrolment.js"],"names":["SELECTORS","BUTTON_TRIGGER","ESCOChoiceEnrolment","options","contextid","init","prototype","courseid","modal","triggerButtons","remove","$","when","Str","get_strings","key","component","ModalFactory","create","type","types","DEFAULT","then","strings","setTitle","body","setBody","on","hide","bind","fail","Notification","exception","show","config"],"mappings":"mNAOA,OACA,OACA,OACA,O,mEAEMA,CAAAA,CAAS,CAAG,CACdC,cAAc,CAAE,gEADF,C,CAIZC,CAAmB,CAAG,SAACC,CAAD,CAAa,CACrC,CAAI,CAACC,SAAL,CAAiBD,CAAO,CAACC,SAAzB,CACA,CAAI,CAACC,IAAL,EACH,C,CAGDH,CAAmB,CAACI,SAApB,CAA8BC,QAA9B,CAAyC,CAAzC,CAGAL,CAAmB,CAACI,SAApB,CAA8BE,KAA9B,CAAsC,IAAtC,CAEAN,CAAmB,CAACI,SAApB,CAA8BD,IAA9B,CAAqC,UAAM,CACvC,GAAMI,CAAAA,CAAc,CAAG,cAAET,CAAS,CAACC,cAAZ,CAAvB,CACA,cAAE,mCAAF,EAAuCS,MAAvC,GAEAC,UAAEC,IAAF,CACIC,UAAIC,WAAJ,CAAgB,CACZ,CAACC,GAAG,CAAE,aAAN,CAAqBC,SAAS,CAAE,iBAAhC,CADY,CAEZ,CAACD,GAAG,CAAE,cAAN,CAAsBC,SAAS,CAAE,iBAAjC,CAFY,CAGZ,CAACD,GAAG,CAAE,gBAAN,CAAwBC,SAAS,CAAE,iBAAnC,CAHY,CAAhB,CADJ,CAMIC,UAAaC,MAAb,CAAoB,CAChBC,IAAI,CAAEF,UAAaG,KAAb,CAAmBC,OADT,CAApB,CAEGZ,CAFH,CANJ,EASEa,IATF,CASO,SAAUC,CAAV,CAAmBf,CAAnB,CAA0B,CAC7B,KAAKA,KAAL,CAAaA,CAAb,CAEAA,CAAK,CAACgB,QAAN,CAAeD,CAAO,CAAC,CAAD,CAAtB,EAEA,GAAIE,CAAAA,CAAI,CAAG,EAAX,CACAA,CAAI,EAAI,8EAA4EF,CAAO,CAAC,CAAD,CAAnF,CAAyF,WAAjG,CACAE,CAAI,EAAI,gFAA8EF,CAAO,CAAC,CAAD,CAArF,CAA2F,WAAnG,CAEAf,CAAK,CAACkB,OAAN,CAAcD,CAAd,EAEA,cAAE,MAAF,EAAUE,EAAV,CAAa,OAAb,CAAsB,kEAAtB,CAA0F,UAAM,CAC5FnB,CAAK,CAACoB,IAAN,EACH,CAFD,CAGH,CAdM,CAcLC,IAdK,CAcA,CAdA,CATP,EAuBcC,IAvBd,CAuBmBC,UAAaC,SAvBhC,EA0BA,cAAE,MAAF,EAAUL,EAAV,CAAa,OAAb,CAAsB3B,CAAS,CAACC,cAAhC,CAAgD,UAAM,CAClD,SAAQO,KAAR,CAAcyB,IAAd,EACH,CAFD,CAGH,CAjCD,C,OAmCoB,QAAP5B,CAAAA,IAAO,CAAA6B,CAAM,CAAI,CACzB,GAAIhC,CAAAA,CAAJ,CAAwBgC,CAAxB,CACJ,C","sourcesContent":["/**\n * ESCO Enrolment AMD module.\n *\n * @module     enrol_manual/quickenrolment\n * @copyright  2016 Damyon Wiese <damyon@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport $ from 'jquery';\nimport Str from 'core/str';\nimport Notification from 'core/notification';\nimport ModalFactory from 'core/modal_factory';\n\nconst SELECTORS = {\n    BUTTON_TRIGGER: \".enrolusersbutton.enrol_simplesco_plugin.enrol [type='submit']\",\n};\n\nconst ESCOChoiceEnrolment = (options) => {\n    this.contextid = options.contextid;\n    this.init();\n};\n\n/** @var {number} courseid - */\nESCOChoiceEnrolment.prototype.courseid = 0;\n\n/** @var {Modal} modal */\nESCOChoiceEnrolment.prototype.modal = null;\n\nESCOChoiceEnrolment.prototype.init = () => {\n    const triggerButtons = $(SELECTORS.BUTTON_TRIGGER);\n    $(\".singlebutton.enrol_manual_plugin\").remove();\n\n    $.when(\n        Str.get_strings([\n            {key: 'choisetitle', component: 'enrol_simplesco'},\n            {key: 'btnenroluser', component: 'enrol_simplesco'},\n            {key: 'btnenrolcohort', component: 'enrol_simplesco'},\n        ]),\n        ModalFactory.create({\n            type: ModalFactory.types.DEFAULT,\n        }, triggerButtons)\n    ).then(function (strings, modal) {\n        this.modal = modal;\n\n        modal.setTitle(strings[0]);\n\n        let body = \"\";\n        body += '<button class=\"btn btn-primary btn-block\" id=\"enrol_simplesco_adduser\">' + strings[1] + '</button>';\n        body += '<button class=\"btn btn-primary btn-block\" id=\"enrol_simplesco_addcohort\">' + strings[2] + '</button>';\n\n        modal.setBody(body);\n\n        $('body').on('click', 'button#enrol_simplesco_adduser, button#enrol_simplesco_addcohort', () => {\n            modal.hide();\n        });\n    }.bind(this)).fail(Notification.exception);\n\n    const context = this;\n    $(\"body\").on(\"click\", SELECTORS.BUTTON_TRIGGER, () => {\n        context.modal.show();\n    });\n};\n\nexport const init = config => {\n    (new ESCOChoiceEnrolment(config));\n};"],"file":"choiceenrolment.min.js"}